---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import TechStack from "../components/TechStack.astro";
import Work from "../components/Work.astro";
---

<Layout>
  <main>
    <Hero />
    <TechStack />
    <Work />
  </main>
</Layout>

<script>
  const element1 = document.getElementById("element1");
  const element2 = document.getElementById("element2");
  let isElement1Visible = false;
  let isElement2Visible = false;

  // Function to handle scroll event
  function handleScroll() {
    const element1Top = element1.getBoundingClientRect().top;
    const element2Top = element2.getBoundingClientRect().top;

    // Check if element1 is in view and has not animated yet
    if (element1Top < window.innerHeight && !isElement1Visible) {
      element1.style.transform = "translateX(0)";
      isElement1Visible = true;
    }

    // Check if element2 is in view and has not animated yet
    if (element2Top < window.innerHeight && !isElement2Visible) {
      element2.style.transform = "translateX(0)";
      isElement2Visible = true;
    }

    // Handle scroll up event
    if (window.scrollY < window.lastScrollY) {
      if (isElement1Visible && element1Top > 0) {
        element1.style.transform = "translateX(-100%)";
        isElement1Visible = false;
      }
      if (isElement2Visible && element2Top > 0) {
        element2.style.transform = "translateX(100%)";
        isElement2Visible = false;
      }
    }

    window.lastScrollY = window.scrollY; // Store the current scroll position
  }

  window.lastScrollY = window.scrollY; // Initialize the scroll position
  window.addEventListener("scroll", handleScroll);
</script>
